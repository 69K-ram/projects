<html>
  <style>
    /*  */
    html {
    height: 100%;
    margin: 0;
    }
    /* make the canvas fill its container */
    #canvas {
      width: 100%;
      height: 100%;
      display: block;
    }
  </style>
  <div class="divcanvas">
  	<canvas id="canvas"></canvas>
	</div>
</html>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

resizeCanvasToDisplaySize(canvas);

ctx.fillStyle = 'lightblue'; // paint canvas black
ctx.fillRect(0, 0, canvas.width, canvas.height);

cellsWidth = Math.round(canvas.width / 50) + 2;
cellsTall  = Math.round(canvas.height / 50) + 2;

var cells = new Array(cellsWidth); // create cell array
for (let i = 0; i < cellsWidth; i++) {
  cells[i] = new Array(cellsTall);
}

for (let y = 0; y < cellsTall; y++) { // initalize cell array
	for (let x = 0; x < cellsWidth; x++) {
		cells[x][y] = Math.round(Math.random() - 0.3);
	};
};

newGeneration();

function newGeneration() {
	let changedCells = cells;
	for (let y = 1; y < cellsTall - 1; y++) { // initalize cell array
		for (let x = 1; x < cellsWidth - 1; x++) {
			let neighbours = 0;
			// starts top left, checks clockwise
			neighbours += cells[x - 1][y - 1];
			neighbours += cells[x]		[y - 1];
			neighbours += cells[x + 1][y - 1];
			neighbours += cells[x + 1][y];
			neighbours += cells[x + 1][y + 1];
			neighbours += cells[x]    [y + 1];
			neighbours += cells[x - 1][y + 1];
			neighbours += cells[x - 1][y];

			if (cells[x][y] == 1) { // live cell
				if (neighbours == 2 || neighbours == 3) {
					// lives
				} else { // dies
					changedCells[x][y] = 0;
				};
			} else { // dead cell
				if (neighbours == 3) {
					changedCells[x][y] = 1; // cell revives
				}
			};

		};
	};

	cells = changedCells;
	displayCells();
	setTimeout(newGeneration, 1000);
};

function displayCells() {
	for (let y = 1; y < cellsTall - 1; y++) { // initalize cell array
		for (let x = 1; x < cellsWidth - 1; x++) {
			
			// assume cell is empty, draw empty
			ctx.fillStyle = 'darkgray';
			ctx.fillRect((x - 1) * 50, (y - 1) * 50, 50, 50);
			
			// if cell is alive, draw black
			if (cells[x][y] == 1 ){
				ctx.fillStyle = 'white';
				ctx.fillRect((x - 1) * 50, (y - 1) * 50, 50, 50);
			};
			
		};
	};
	
};

function resizeCanvasToDisplaySize(canvas) {
  // Lookup the size the browser is displaying the canvas in CSS pixels.
  const displayWidth  = canvas.clientWidth;
  const displayHeight = canvas.clientHeight;
  // Check if the canvas is not the same size.
  const needResize = canvas.width  !== displayWidth || canvas.height !== displayHeight;
  if (needResize) {
    // Make the canvas the same size
    canvas.width  = displayWidth;
    canvas.height = displayHeight;
  }
	return needResize;
}

</script>
